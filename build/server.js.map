{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Header/index.js","webpack:///./src/containers/App.js","webpack:///./src/containers/Counter/index.js","webpack:///./src/containers/Home/index.js","webpack:///./src/routes.js","webpack:///./src/server/index.js","webpack:///./src/server/render.js","webpack:///./src/store/action-types.js","webpack:///./src/store/actions/counter.js","webpack:///./src/store/actions/home.js","webpack:///./src/store/index.js","webpack:///./src/store/reducers/counter.js","webpack:///./src/store/reducers/home.js","webpack:///./src/store/reducers/index.js","webpack:///external \"axios\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-redux\"","webpack:///external \"react-router-config\"","webpack:///external \"react-router-dom\"","webpack:///external \"redux\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-thunk\""],"names":["Header","Component","App","console","log","props","marginTop","renderRoutes","route","components","Counter","number","increment","connect","state","counter","actions","Home","list","length","getHomeList","map","item","id","name","home","loadData","store","dispatch","path","component","exact","key","express","require","fs","app","use","static","get","req","res","render","listen","context","getServerStore","matchedRoutes","matchRoutes","routes","promises","forEach","push","Promise","all","then","html","renderToString","send","JSON","stringify","getState","INCREMENT","SET_HOME_LIST","type","types","axios","result","data","payload","createStore","reducers","applyMiddleware","thunk","logger","getClientStore","initState","window","action","combineReducers"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA;;IACqBA,M;;;;;;;;;;;;;6BACP;AACN,aACI;AAAK,iBAAS,EAAC;AAAf,SACI;AAAK,iBAAS,EAAC;AAAf,SACI;AAAK,iBAAS,EAAC;AAAf,SACI;AAAG,iBAAS,EAAC;AAAb,eADJ,CADJ,EAII,wEACI;AAAI,iBAAS,EAAC;AAAd,SACI,uEAAI,2DAAC,qDAAD;AAAM,UAAE,EAAC;AAAT,wBAAJ,CADJ,EAEI,uEAAI,2DAAC,qDAAD;AAAM,UAAE,EAAC;AAAT,8BAAJ,CAFJ,CADJ,CAJJ,CADJ,CADJ;AAeH;;;;EAjB+BC,+C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDpC;AACA;AACA;;IACqBC,G;;;;;;;;;;;;;6BACR;AACLC,aAAO,CAACC,GAAR,CAAY,aAAZ,EAA0B,KAAKC,KAA/B;AACA,aACI,2DAAC,8CAAD,QACI,2DAAC,0DAAD,OADJ,EAEI;AAAK,iBAAS,EAAC,WAAf;AAA2B,aAAK,EAAE;AAACC,mBAAS,EAAE;AAAZ;AAAlC,SACKC,wEAAY,CAAC,KAAKF,KAAL,CAAWG,KAAX,CAAiBC,UAAlB,CADjB,CAFJ,CADJ;AAQH;;;;EAX4BR,+C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJjC;AACA;AACA;;IACMS,O;;;;;;;;;;;;;6BACM;AAAA;;AACJ,aACI,wEACI,sEAAI,KAAKL,KAAL,CAAWM,MAAf,CADJ,EAEI;AAAQ,eAAO,EAAE,mBAAI;AACjB;AACA;AACA;AACA,eAAI,CAACN,KAAL,CAAWO,SAAX;AACH;AALD,aAFJ,CADJ;AAWH;;;;EAbiBX,+C;;AAetBS,OAAO,GAAGG,2DAAO,CACb,UAAAC,KAAK;AAAA,SAAIA,KAAK,CAACC,OAAV;AAAA,CADQ,EAEbC,8DAFa,CAAP,CAGRN,OAHQ,CAAV;AAIeA,sEAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;;IACMO,I;;;;;;;;;;;;;yCACkB;AAChB,UAAG,KAAKZ,KAAL,CAAWa,IAAX,CAAgBC,MAAhB,IAA0B,CAA7B,EAA+B;AAC3B,aAAKd,KAAL,CAAWe,WAAX;AACH;AACJ;;;6BACO;AACJ,aACI;AAAK,iBAAS,EAAC;AAAf,SACI;AAAK,iBAAS,EAAC;AAAf,SACI;AAAI,iBAAS,EAAC;AAAd,SAEQ,KAAKf,KAAL,CAAWa,IAAX,CAAgBG,GAAhB,CAAoB,UAAAC,IAAI;AAAA,eACpB;AAAI,aAAG,EAAEA,IAAI,CAACC,EAAd;AAAkB,mBAAS,EAAC;AAA5B,WAA+CD,IAAI,CAACE,IAApD,CADoB;AAAA,OAAxB,CAFR,CADJ,CADJ,CADJ;AAaH;;;;EApBcvB,+C;;AAsBnBgB,IAAI,GAAGJ,2DAAO,CACV,UAAAC,KAAK;AAAA,SAAEA,KAAK,CAACW,IAAR;AAAA,CADK,EAEVT,2DAFU,CAAP,CAGLC,IAHK,CAAP,C,CAIA;;AACAA,IAAI,CAACS,QAAL,GAAgB,UAASC,KAAT,EAAe;AAC3B;AACF,SAAOA,KAAK,CAACC,QAAN,CAAeZ,2DAAO,CAACI,WAAR,EAAf,CAAP;AACD,CAHD;;AAIeH,mEAAf,E;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;CAEA;AACA;AACA;AACA;AACA;AACA;;AACA;;;;;;;;;;;;;;;;AAgBA;;AACe,gEACX;AACIY,MAAI,EAAE,GADV;AAEIC,WAAS,EAAE5B,uDAFf;AAGI;AACAO,YAAU,EAAE,CACR;AACIoB,QAAI,EAAE,GADV;AAEIC,aAAS,EAAEb,wDAFf;AAGIc,SAAK,EAAE,IAHX;AAIIC,OAAG,EAAE,GAJT;AAKIN,YAAQ,EAACT,wDAAI,CAACS,QALlB,CAK2B;;AAL3B,GADQ,EAQR;AACIG,QAAI,EAAE,UADV;AAEIC,aAAS,EAAEpB,2DAFf;AAGIsB,OAAG,EAAE;AAHT,GARQ;AAJhB,CADW,CAAf,E;;;;;;;;;;;;AC3BA;AAAA;AAAA;;AACA,IAAIC,OAAO,GAAGC,mBAAO,CAAC,wBAAD,CAArB;;AACA,IAAIC,EAAE,GAAGD,mBAAO,CAAC,cAAD,CAAhB;;AACA,IAAIE,GAAG,GAAGH,OAAO,EAAjB,C,CACA;;AACAG,GAAG,CAACC,GAAJ,CAAQJ,OAAO,CAACK,MAAR,CAAe,QAAf,CAAR;AACAF,GAAG,CAACG,GAAJ,CAAQ,GAAR,EAAa,UAASC,GAAT,EAAaC,GAAb,EAAiB;AAC1BC,yDAAM,CAACF,GAAD,EAAKC,GAAL,CAAN;AACH,CAFD;AAGAL,GAAG,CAACO,MAAJ,CAAW,IAAX,EAAiB,YAAU;AACvBxC,SAAO,CAACC,GAAR,CAAY,6BAAZ;AACH,CAFD,E;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,yEAAUoC,GAAV,EAAeC,GAAf,EAAoB;AAC/B,MAAIG,OAAO,GAAG;AAACpB,QAAI,EAAE;AAAP,GAAd;AACA,MAAIG,KAAK,GAAGkB,6DAAc,EAA1B,CAF+B,CAG/B;AACA;AACA;AACA;;AACA,MAAIC,aAAa,GAAGC,uEAAW,CAACC,+CAAD,EAAQR,GAAG,CAACX,IAAZ,CAA/B;AACA1B,SAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6B0C,aAA7B;AACA,MAAIG,QAAQ,GAAG,EAAf;AACAH,eAAa,CAACI,OAAd,CAAsB,UAAA1C,KAAK,EAAI;AAC3B,QAAIA,KAAK,CAACkB,QAAV,EAAoB;AAChBuB,cAAQ,CAACE,IAAT,CAAc3C,KAAK,CAACkB,QAAN,CAAeC,KAAf,CAAd;AACH;AACJ,GAJD,EAV+B,CAe/B;;AAEAyB,SAAO,CAACC,GAAR,CAAYJ,QAAZ,EAAsBK,IAAtB,CAA2B,YAAU;AACjC;AACA;AACA,QAAIC,IAAI,GAAGC,uEAAc,CACrB,2DAAC,oDAAD;AAAU,WAAK,EAAE7B;AAAjB,OACI,2DAAC,6DAAD;AAAc,aAAO,EAAE;AAACiB,eAAO,EAAPA;AAAD,OAAvB;AAAkC,cAAQ,EAAEJ,GAAG,CAACX;AAAhD,OACKtB,wEAAY,CAACyC,+CAAD,CADjB,CADJ,CADqB,CAAzB;AAOAP,OAAG,CAACgB,IAAJ,qUAO6BF,IAP7B,iIAU4BG,IAAI,CAACC,SAAL,CAAehC,KAAK,CAACiC,QAAN,EAAf,CAV5B;AAiBH,GA3BD;AA6BH,C;;;;;;;;;;;;ACrDD;AAAA;AAAA;AAAO,IAAMC,SAAS,GAAG,WAAlB;AACA,IAAMC,aAAa,GAAG,eAAtB,C;;;;;;;;;;;;ACDP;AAAA;AAAA;AACe;AACXlD,WADW,uBACA;AACP,WAAO;AACHmD,UAAI,EAAEC,uDAAeH;AADlB,KAAP;AAGH;AALU,CAAf,E;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;AACA;AACe;AACXzC,aADW,yBACE;AACT;AACA;AACA;AACA,WAAO,UAASQ,QAAT,EAAkBgC,QAAlB,EAA2B;AAC9B,aAAOK,4CAAK,CAAC1B,GAAN,CAAU,iCAAV,EAA6Ce,IAA7C,CAAkD,UAASY,MAAT,EAAgB;AACrE,YAAIhD,IAAI,GAAGgD,MAAM,CAACC,IAAlB,CADqE,CAErE;;AACAvC,gBAAQ,CAAC;AACLmC,cAAI,EAACC,2DADA;AAELI,iBAAO,EAAClD;AAFH,SAAD,CAAR;AAIH,OAPM,CAAP;AAQH,KATD;AAUH;AAfU,CAAf,E;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACO,SAAS2B,cAAT,GAAyB;AAC5B,SAAOwB,yDAAW,CAACC,iDAAD,EAAUC,6DAAe,CAACC,kDAAD,EAAOC,mDAAP,CAAzB,CAAlB;AACH;AAEM,SAASC,cAAT,GAAyB;AAC5B,MAAIC,SAAS,GAAGC,MAAM,CAAChC,OAAP,CAAe9B,KAA/B;AACA,SAAOuD,yDAAW,CAACC,iDAAD,EAAWK,SAAX,EAAsBJ,6DAAe,CAACC,kDAAD,EAAOC,mDAAP,CAArC,CAAlB;AACH,C;;;;;;;;;;;;ACXD;AAAA;AAAA;AAEA,IAAIE,SAAS,GAAG;AACZhE,QAAM,EAAE;AADI,CAAhB;AAGe,2EAAoC;AAAA,MAA1BG,KAA0B,uEAAlB6D,SAAkB;AAAA,MAARE,MAAQ;;AAC/C,UAAOA,MAAM,CAACd,IAAd;AACI,SAAKC,uDAAL;AACI,aAAO;AACHrD,cAAM,EAAEG,KAAK,CAACH,MAAN,GAAe;AADpB,OAAP;;AAGJ;AACI,aAAOG,KAAP;AANR;AAQH,C;;;;;;;;;;;;ACdD;AAAA;AAAA;AACA,IAAI6D,SAAS,GAAG;AAACzD,MAAI,EAAC;AAAN,CAAhB;AACe,2EAAgC;AAAA,MAAvBJ,KAAuB,uEAAjB6D,SAAiB;AAAA,MAAPE,MAAO;;AAC5C,UAAOA,MAAM,CAACd,IAAd;AACI,SAAKC,2DAAL;AACE,aAAO;AAAC9C,YAAI,EAAC2D,MAAM,CAACT;AAAb,OAAP;;AACF;AACE,aAAOtD,KAAP;AAJN;AAMF,C;;;;;;;;;;;;ACTD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA,IAAIwD,QAAQ,GAAGQ,6DAAe,CAAC;AAC3B/D,SAAO,EAAPA,gDAD2B;AAE3BU,MAAI,EAAJA,6CAAIA;AAFuB,CAAD,CAA9B;AAIe6C,uEAAf,E;;;;;;;;;;;ACPA,kC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,+B;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,gD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,wC","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/server/index.js\");\n","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nexport default class Header extends Component {\r\n    render () {\r\n        return (\r\n            <nav className=\"navbar navbar-inverse navbar-fixed-top\">\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"navbar-header\">\r\n                        <a className=\"navbar-brand\">SSR</a>\r\n                    </div>\r\n                    <div >\r\n                        <ul className=\"nav navbar-nav\">\r\n                            <li><Link to=\"/\">首页</Link></li>\r\n                            <li><Link to=\"/counter\">计数器</Link></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n","\r\nimport React, {Component,Fragment} from 'react';\r\nimport {renderRoutes,matchRoutes} from 'react-router-config';\r\nimport Header from '../components/Header'\r\nexport default class App extends Component {\r\n    render() {\r\n        console.log('this.props:',this.props);\r\n        return (\r\n            <Fragment>\r\n                <Header/>\r\n                <div className=\"container\" style={{marginTop: 70}}>\r\n                    {renderRoutes(this.props.route.components)}\r\n                </div>\r\n            </Fragment>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport actions from '../../store/actions/counter';\r\nclass Counter extends Component {\r\n    render(){\r\n        return (\r\n            <div>\r\n                <p>{this.props.number}</p>\r\n                <button onClick={()=>{\r\n                    // this.setState({\r\n                    //     number: this.state.number + 1\r\n                    // });\r\n                    this.props.increment();\r\n                }}>+</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nCounter = connect(\r\n    state => state.counter,\r\n    actions\r\n)(Counter);\r\nexport default Counter;","import React,{Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport actions from '../../store/actions/home';\r\nclass Home extends Component{\r\n    componentWillMount(){\r\n        if(this.props.list.length == 0){\r\n            this.props.getHomeList();\r\n        }\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 col-md-offset-3\">\r\n                    <ul className=\"list-group\">\r\n                        {\r\n                            this.props.list.map(item=>(\r\n                                <li key={item.id} className=\"list-group-item\">{item.name}</li>\r\n                            ))\r\n                        }\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nHome = connect(\r\n    state=>state.home,\r\n    actions\r\n)(Home);\r\n//此方法是用来异步加载数据的方法。用这个方法可以加载数据并且放到仓库中去\r\nHome.loadData = function(store){\r\n    //dispatch方法的返回值就是派发的action，最终返回的是一个promise\r\n  return store.dispatch(actions.getHomeList());\r\n}\r\nexport default Home;","import React, {Component,Fragment} from 'react';\r\nimport {Route} from 'react-router-dom';\r\nimport Home from './containers/Home';\r\nimport App from './containers/App';\r\nimport Counter from './containers/Counter';\r\n// export default (\r\n//     <Fragment>\r\n//         <Route path=\"/\" exact component={Home}/>\r\n//         <Route path=\"/counter\" component={Counter}/>\r\n//     </Fragment>\r\n// );\r\n/*\r\nexport default [\r\n    {\r\n        path: '/',\r\n        component: Home,\r\n        exact: true,\r\n        key: '/',\r\n        loadData:Home.loadData //加载数据， 如果此配置项有了这个属性，那么意味着需要加载异步数据\r\n    },\r\n    {\r\n        path: '/counter',\r\n        component: Counter,\r\n        key: '/counter'\r\n    }\r\n];\r\n*/\r\n// 要渲染多级路由，原来的方式不行了，\r\nexport default [\r\n    {\r\n        path: '/',\r\n        component: App,\r\n        // 子路由\r\n        components: [\r\n            {\r\n                path: '/',\r\n                component: Home,\r\n                exact: true,\r\n                key: '/',\r\n                loadData:Home.loadData //加载数据， 如果此配置项有了这个属性，那么意味着需要加载异步数据\r\n            },\r\n            {\r\n                path: '/counter',\r\n                component: Counter,\r\n                key: '/counter'\r\n            }\r\n        ]\r\n    }\r\n];","\r\nimport render from './render';\r\nlet express = require('express');\r\nlet fs = require('fs');\r\nlet app = express();\r\n// 把public当做静态文件的根目录\r\napp.use(express.static('public'));\r\napp.get('*', function(req,res){\r\n    render(req,res);\r\n});\r\napp.listen(3000, function(){\r\n    console.log('server started at port 3000');\r\n});","import React from 'react';\r\nimport {StaticRouter,matchPath,Route} from 'react-router-dom';\r\nimport {renderRoutes,matchRoutes} from 'react-router-config';\r\nimport {renderToString} from 'react-dom/server';\r\nimport routes from '../routes';\r\nimport {Provider} from 'react-redux';\r\nimport {getServerStore} from '../store';\r\nexport default function (req, res) {\r\n    let context = {name: 'zfpx'};\r\n    let store = getServerStore();\r\n    // 获取要渲染的组件,matchPath是路由提供的工具方法，可以用来判断路径和路由对象是否匹配\r\n    // 正则 /api/:id/\r\n    // console.log('routes:',routes);\r\n    // 这个方法可以处理嵌套路由，\r\n    let matchedRoutes = matchRoutes(routes,req.path);\r\n    console.log('matchedRoutes:',matchedRoutes);\r\n    let promises = [];\r\n    matchedRoutes.forEach(route => {\r\n        if (route.loadData) {\r\n            promises.push(route.loadData(store));\r\n        }\r\n    });\r\n    // console.log('matchRoutes:',matchRoutes);\r\n\r\n    Promise.all(promises).then(function(){\r\n        // 创建仓库的时候，仓库里的数据已经有默认值\r\n        // console.log('store.getState():',store.getState());\r\n        let html = renderToString(\r\n            <Provider store={store}>\r\n                <StaticRouter context={{context}} location={req.path}>\r\n                    {renderRoutes(routes)} \r\n                </StaticRouter>\r\n            </Provider>\r\n        );\r\n        res.send(`\r\n            <html>\r\n                <head>\r\n                    <title>珠峰ssr</title>\r\n                    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css\"  >\r\n                </head>\r\n                <body>\r\n                    <div id=\"root\">${html}</div>\r\n                    <script>\r\n                        window.context = {\r\n                            state:${JSON.stringify(store.getState())}\r\n                        }\r\n                    </script>\r\n                    <script src=\"/client.js\"></script>\r\n                </body>\r\n            </html>\r\n        `);\r\n    });\r\n\r\n}","export const INCREMENT = 'INCREMENT';\r\nexport const SET_HOME_LIST = 'SET_HOME_LIST';","import * as types from '../action-types';\r\nexport default {\r\n    increment(){\r\n        return {\r\n            type: types.INCREMENT\r\n        }\r\n    }\r\n}","import * as types from '../action-types';\r\nimport axios from 'axios';\r\nexport default {\r\n    getHomeList(){\r\n        // 调接口\r\n        // 返回一个函数，store.dispatch(action);\r\n        // redux-thunk中间件\r\n        return function(dispatch,getState){\r\n            return axios.get('http://localhost:4000/api/users').then(function(result){\r\n                let list = result.data;\r\n                // console.log('list:', list);\r\n                dispatch({\r\n                    type:types.SET_HOME_LIST,\r\n                    payload:list\r\n                });\r\n            });\r\n        }\r\n    }\r\n}","import {createStore, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport logger from 'redux-logger';\r\nimport reducers from './reducers';\r\nexport function getServerStore(){\r\n    return createStore(reducers,applyMiddleware(thunk,logger));\r\n}\r\n\r\nexport function getClientStore(){\r\n    let initState = window.context.state;\r\n    return createStore(reducers, initState, applyMiddleware(thunk,logger));\r\n}","import * as types from '../action-types';\r\n\r\nlet initState = {\r\n    number: 0\r\n};\r\nexport default function (state = initState,action) {\r\n    switch(action.type){\r\n        case types.INCREMENT:\r\n            return {\r\n                number: state.number + 1\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import * as types from '../action-types';\r\nlet initState = {list:[]};\r\nexport default function(state=initState,action){\r\n   switch(action.type){\r\n       case types.SET_HOME_LIST:\r\n         return {list:action.payload};\r\n       default:\r\n         return state;\r\n   }\r\n}","import {combineReducers} from 'redux';\r\nimport counter from './counter';\r\nimport home from './home';\r\nlet reducers = combineReducers({\r\n    counter,\r\n    home\r\n});\r\nexport default reducers;","module.exports = require(\"axios\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-config\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-logger\");","module.exports = require(\"redux-thunk\");"],"sourceRoot":""}